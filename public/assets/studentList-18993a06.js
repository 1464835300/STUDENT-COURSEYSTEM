import{A as b}from"./index-0f36edad.js";import{h as w,r as x,d as G,i as s,o as v,c as z,b as u,k as e,w as o,F as H,x as J,m as c,v as U,n as I,j as K}from"./index-68abc859.js";import"./axiosInstance-bc0bb028.js";const O={class:"main mx-20 mt-10"},Q={class:"buttonBox mb-5"},W=u("span",{class:"ml-[30px] font-bold text-[#409eff]"},"查询条件",-1),X={class:"tableList"},Z={class:"mb-5 mt-10 flex flex-row-reverse"},ee=u("div",{class:"flex-1"},[u("h2",{class:"text-xl text-primaryColor"},"管理员列表")],-1),le={class:"table w-full relative"},te={class:"absolute w-full"},re={__name:"studentList",setup(oe){const V=w([]),q=w(),a=x({email:"",pwd:"",phone:"",gender:"",birth:"",remark:"",name:""}),y=w(),h=async(n,l,r)=>{if(console.log(n),l==="")return r(new Error("请输入"));if(n.field=="email")if(/\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/.test(l))r();else return r(new Error("邮箱格式不正确"));else if(/^(0|86|17951)?(13[0-9]|15[012356789]|166|17[3678]|18[0-9]|14[57])[0-9]{8}$/.test(l))r();else return r(new Error("手机格式不正确"))},B=x({email:[{validator:h,trigger:["change","blur"]}],pwd:[{required:!0,message:"请输入密码",trigger:"change"}],phone:[{validator:h,trigger:["change","blur"]}],gender:[{required:!0,message:"请选择性别",trigger:"change"}],birth:[{type:"date",required:!0,message:"请选择出生年月",trigger:"change"}]}),m=w(!1),_=x({pageCount:0,pageIndex:1,totalCount:0,listData:[]}),d=x({sno:"",classno:"",name:"",pageIndex:1,pageSize:5});G(async()=>{f();const n=await b.studentInfo.getClassList();V.value=n.data,console.log(V)});const f=async()=>{console.log(d);const n=await b.studentInfo.getStudentList(d);console.log(n),_.pageCount=n.data.pageCount,_.totalCount=n.data.totalCount,_.listData=n.data.listData},D=n=>{d.pageIndex=n,f()},L=(n,l)=>{U.confirm("是否删除?","提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(async()=>{(await b.adminInfo.onFreeze({loginname:n.loginname,type:l})).data&&I({message:"删除成功",type:"success",duration:1e3}),f()})},Y=()=>{y.value.validate(n=>{n&&U.confirm("是否提交?","提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"success"}).then(async()=>{const l=await b.adminInfo.register(a);y.value.resetFields(),m.value=!1,l.data&&I({message:"注册成功",type:"success",duration:1e3}).then(()=>{f()})})})};return(n,l)=>{const r=s("el-input"),p=s("el-form-item"),F=s("el-option"),M=s("el-select"),S=s("el-collapse-item"),$=s("el-collapse"),C=s("el-form"),E=s("el-pagination"),T=s("el-empty"),i=s("el-table-column"),g=s("el-button"),A=s("el-table"),N=s("el-date-picker"),k=s("el-radio"),j=s("el-radio-group"),P=s("el-dialog");return v(),z("div",O,[u("div",Q,[u("button",{class:"border-[#67c23a] rounded-sm bg-[#67c23a] borde border text-sm text-white whitespace-nowrap px-14 py-4 mx-2",type:"button",onClick:l[0]||(l[0]=t=>m.value=!0)},"新增"),u("button",{class:"border-[#409eff] rounded-sm bg-[#409eff] borde border text-sm text-white whitespace-nowrap px-14 py-4 mx-2",type:"button",onClick:f},"查询")]),e(C,{inline:!0,model:d,"label-width":"80px"},{default:o(()=>[e($,{class:"border border-[#ebeef5]"},{default:o(()=>[e(S,{name:"1"},{title:o(()=>[W]),default:o(()=>[e(p,{label:"学号"},{default:o(()=>[e(r,{placeholder:"请输入",modelValue:d.sno,"onUpdate:modelValue":l[1]||(l[1]=t=>d.sno=t)},null,8,["modelValue"])]),_:1}),e(p,{label:"教室名称"},{default:o(()=>[e(M,{modelValue:d.classno,"onUpdate:modelValue":l[2]||(l[2]=t=>d.classno=t),placeholder:"请选择",clearable:"",filterable:""},{default:o(()=>[(v(!0),z(H,null,J(V.value,t=>(v(),K(F,{key:t.classno,label:t.cname,value:t.classno},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(p,{label:"学生名称"},{default:o(()=>[e(r,{placeholder:"请输入",modelValue:d.name,"onUpdate:modelValue":l[3]||(l[3]=t=>d.name=t)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"]),u("div",X,[u("div",Z,[e(E,{onSizeChange:l[4]||(l[4]=t=>f()),onCurrentChange:D,layout:"total, sizes, prev, pager, next, jumper",total:_.totalCount,"page-size":d.pageSize,"onUpdate:pageSize":l[5]||(l[5]=t=>d.pageSize=t),"page-sizes":[5,10,15,20]},null,8,["total","page-size"]),ee]),u("div",le,[u("div",te,[e(A,{ref_key:"tableInfo",ref:q,data:_.listData,border:"","max-height":"400",stripe:"",style:{width:"100%"}},{empty:o(()=>[e(T,{description:"暂无数据"})]),default:o(()=>[e(i,{width:"60",type:"index",label:"行号"}),e(i,{prop:"sno",label:"学号"}),e(i,{prop:"name",label:"姓名"}),e(i,{prop:"cname",label:"班级"}),e(i,{prop:"birth",formatter:t=>t.birth.slice(0,10),label:"生日"},null,8,["formatter"]),e(i,{prop:"gender",formatter:t=>t.gender===0?"男":"女",label:"性别"},null,8,["formatter"]),e(i,{prop:"email",label:"邮箱"}),e(i,{prop:"phone",label:"电话"}),e(i,{label:"操作",width:"150px"},{default:o(t=>[e(g,{size:"small",type:"success",onClick:l[6]||(l[6]=R=>m.value=!0)},{default:o(()=>[c("编辑")]),_:1}),e(g,{size:"small",type:"danger",onClick:R=>L(t.row,1)},{default:o(()=>[c("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])])])]),e(P,{modelValue:m.value,"onUpdate:modelValue":l[16]||(l[16]=t=>m.value=t),title:"管理员新增"},{footer:o(()=>[u("span",null,[e(g,{onClick:l[14]||(l[14]=t=>m.value=!1)},{default:o(()=>[c("取消")]),_:1}),e(g,{type:"primary",onClick:l[15]||(l[15]=t=>Y())},{default:o(()=>[c(" 确认 ")]),_:1})])]),default:o(()=>[e(C,{ref_key:"addFormRef",ref:y,model:a,rules:B,"label-width":"80px"},{default:o(()=>[e(p,{required:"",label:"密码",prop:"pwd"},{default:o(()=>[e(r,{placeholder:"请输入密码",type:"password",modelValue:a.pwd,"onUpdate:modelValue":l[7]||(l[7]=t=>a.pwd=t),autocomplete:"off"},null,8,["modelValue"])]),_:1}),e(p,{required:"",label:"邮箱",prop:"email"},{default:o(()=>[e(r,{placeholder:"请输入",modelValue:a.email,"onUpdate:modelValue":l[8]||(l[8]=t=>a.email=t),autocomplete:"off"},null,8,["modelValue"])]),_:1}),e(p,{required:"",label:"电话",prop:"phone"},{default:o(()=>[e(r,{placeholder:"请输入",type:"tel",modelValue:a.phone,"onUpdate:modelValue":l[9]||(l[9]=t=>a.phone=t),autocomplete:"off"},null,8,["modelValue"])]),_:1}),e(p,{required:"",label:"生日",prop:"birth"},{default:o(()=>[e(N,{format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",modelValue:a.birth,"onUpdate:modelValue":l[10]||(l[10]=t=>a.birth=t),style:{width:"100%"},type:"date",label:"Pick a date",placeholder:"请选择"},null,8,["modelValue"])]),_:1}),e(p,{required:"",label:"性别",prop:"gender"},{default:o(()=>[e(j,{modelValue:a.gender,"onUpdate:modelValue":l[11]||(l[11]=t=>a.gender=t)},{default:o(()=>[e(k,{label:0},{default:o(()=>[c("男")]),_:1}),e(k,{label:1},{default:o(()=>[c("女")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(p,{label:"姓名",required:""},{default:o(()=>[e(r,{placeholder:"请输入",modelValue:a.name,"onUpdate:modelValue":l[12]||(l[12]=t=>a.name=t),autocomplete:"off"},null,8,["modelValue"])]),_:1}),e(p,{label:"个性签名"},{default:o(()=>[e(r,{type:"textarea",placeholder:"请输入",modelValue:a.remark,"onUpdate:modelValue":l[13]||(l[13]=t=>a.remark=t),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])])}}};export{re as default};
